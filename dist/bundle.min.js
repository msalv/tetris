!function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){var i=t[o][1][e];return r(i?i:e)},h,h.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var u=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=e("./res"),c=r(h),d=e("./util"),f=n(d),p=function(){var e=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i.color=e,i.setup(),i}return s(t,e),l(t,[{key:"setup",value:function(){this.graphics.clear().setStrokeStyle(c.dimen.STROKE).beginStroke(c.colors.BLACK).beginFill(this.color).drawRect(c.dimen.STROKE,c.dimen.STROKE,c.dimen.BLOCK,c.dimen.BLOCK),this.setBounds(c.dimen.STROKE,c.dimen.STROKE,c.dimen.BLOCK,c.dimen.BLOCK)}},{key:"center",get:function(){var e=this.getBounds();return{x:e.x+e.width/2,y:e.y+e.height/2}}}]),t}(createjs.Shape);return createjs.promote(e,"Shape")}(),v=function(){var e=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this));return i.color=e,i.coords=[],i.regXY=[],i}return s(t,e),l(t,[{key:"setup",value:function(){for(var e=0;e<this.coords.length;++e){var t=new p(this.color);t.set(this.coords[e]),this.addChild(t)}this.snapToPixel=!0,this.updateBounds()}},{key:"updateBounds",value:function(){this.cacheID&&this.uncache();var e=this.getBounds().pad(c.dimen.STROKE,c.dimen.STROKE,c.dimen.STROKE,c.dimen.STROKE),t=e.x,i=e.y,n=e.width,r=e.height;this.regXY=[{regX:0,regY:0},{regX:0,regY:r},{regX:n,regY:r},{regX:n,regY:0}],this.cache(t,i,n,r)}},{key:"updateReg",value:function(){var e=this.rotation/90;this.scaleX<0&&(e=this.regXY.length-1-e),this.set(this.regXY[e])}},{key:"flip",value:function(){this.scaleX=-this.scaleX,this.updateReg(),this.updateCache()}},{key:"rotate",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=e?90:-90,i=this.rotation+t;this.rotation=i>=360?0:i<0?270:i,this.updateReg(),this.updateCache()}},{key:"width",get:function(){var e=this.getBounds();return this.rotation/90%2==0?e.width:e.height}},{key:"height",get:function(){var e=this.getBounds();return this.rotation/90%2==0?e.height:e.width}}]),t}(createjs.Container);return createjs.promote(e,"Container")}(),y=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e));return i.coords=[{x:0,y:0},{x:c.dimen.BLOCK,y:0},{x:0,y:c.dimen.BLOCK},{x:c.dimen.BLOCK,y:c.dimen.BLOCK}],u(Object.getPrototypeOf(t.prototype),"setup",i).call(i),i}return s(t,e),t}(v),g=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e));return i.coords=[{x:0,y:0},{x:0,y:c.dimen.BLOCK},{x:0,y:2*c.dimen.BLOCK},{x:0,y:3*c.dimen.BLOCK}],i.setup(),i}return s(t,e),t}(v),m=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e));return i.coords=[{x:0,y:0},{x:0,y:c.dimen.BLOCK},{x:0,y:2*c.dimen.BLOCK},{x:c.dimen.BLOCK,y:2*c.dimen.BLOCK}],u(Object.getPrototypeOf(t.prototype),"setup",i).call(i),i}return s(t,e),t}(v),O=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e));return i.coords=[{x:0,y:0},{x:c.dimen.BLOCK,y:0},{x:c.dimen.BLOCK,y:c.dimen.BLOCK},{x:2*c.dimen.BLOCK,y:c.dimen.BLOCK}],u(Object.getPrototypeOf(t.prototype),"setup",i).call(i),i}return s(t,e),t}(v),b=function(e){function t(e){a(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e));return i.coords=[{x:0,y:0},{x:c.dimen.BLOCK,y:0},{x:2*c.dimen.BLOCK,y:0},{x:c.dimen.BLOCK,y:c.dimen.BLOCK}],u(Object.getPrototypeOf(t.prototype),"setup",i).call(i),i}return s(t,e),t}(v),E=function(){var e=[y,m,O,g,b],t=[c.colors.INDIGO,c.colors.RED,c.colors.LIME,c.colors.GREEN,c.colors.BLUE,c.colors.YELLOW,c.colors.PURPLE],i=[0,90,180,270],n=null,r=function(){function r(){a(this,r)}return l(r,[{key:"produce",value:function(){var n=e[f.default.random(0,e.length)],r=t[f.default.random(0,t.length)],a=f.default.random(0,i.length),o=!!f.default.random(0,2),s=new n(r);o&&s.flip();for(var u=0;u<a;++u)s.rotate();return s}}],[{key:"getInstance",value:function(){return null===n&&(n=new r),n}}]),r}();return r}();i.default=E},{"./res":4,"./util":6}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./res"),u=r(s),l=e("./util"),h=n(l),c=e("./figure"),d=n(c),f=e("./togglebutton"),p=n(f),v=e("./pausecontainer"),y=n(v),g=function(){function e(){var e=new createjs.Container;e.x=u.dip(-1),e.y=u.dip(-1);var t=d.default.getInstance().produce().getChildAt(0);t.color=u.colors.WHITE,t.alpha=.3,t.setup();for(var i=0;i<this.width/u.dimen.BLOCK;++i)for(var n=0;n<this.height/u.dimen.BLOCK;++n){var r=t.clone();r.x=i*u.dimen.BLOCK,r.y=n*u.dimen.BLOCK,e.addChild(r)}this.stage.addChild(e)}function t(){var e=this;createjs.Sound.muted=!0;var t=new createjs.Bitmap(n.getResult(u.img.SOUND_OFF.id)),i=new createjs.Bitmap(n.getResult(u.img.SOUND_ON.id));this.soundToggle=new p.default(i,t);var r=this.soundToggle.getBounds();this.soundToggle.set({x:this.sidebarWidth/2-r.width/2,y:this.height-r.height-u.dip(40)}),this.soundToggle.on("click",function(t){createjs.Sound.muted=!createjs.Sound.muted,e.soundToggle.checked=!createjs.Sound.muted,e.sidebar.updateCache(),e.stage.update()}),this.sidebar.addChild(this.soundToggle),this.sidebar.updateCache()}var i=null,n=null,r=null,s=null,l=1e3,c=.8,f=2e3,v=200,g=!1,m=function(){function e(){a(this,e),this.data={}}return o(e,[{key:"add",value:function(e){var t=this;e.forEach(function(e){var i=e.localToGlobal(e.center.x,e.center.y);i={x:Math.round(i.x),y:Math.round(i.y)},t.data[i.y]=t.data[i.y]||{},t.data[i.y][i.x]=e})}},{key:"getLine",value:function(e){return this.data[Math.round(e)]||{}}},{key:"remove",value:function(e){e=Math.round(e),this.data[e]=null,this.shift(e)}},{key:"clear",value:function(){this.data={}}},{key:"shift",value:function(e){var t=this,i={},n=Object.keys(this.data),r=n.filter(function(t){return~~t<e});r.forEach(function(e){var n=t.getLine(e);for(var r in n){var a=n[r];switch(a.parent.rotation){case 0:a.y+=u.dimen.BLOCK;break;case 90:a.x+=a.parent.scaleX*u.dimen.BLOCK;break;case 180:a.y-=u.dimen.BLOCK;break;case 270:a.x-=a.parent.scaleX*u.dimen.BLOCK}a.parent.updateBounds()}i[~~e+u.dimen.BLOCK]=n,t.data[e]=null}),Object.assign(this.data,i)}},{key:"toString",value:function(){var e="";for(var t in this.data){var i=Object.keys(this.data[t]||{}).map(function(e){return h.default.str_pad(e," ",3)});e+=h.default.str_pad(t," ",3)+":"+i.join(",")+" ("+i.length+")\n"}return e}}]),e}(),O=function(){function p(e){a(this,p),e.width=(u.dimen.FIELD_W+u.dimen.SIDEBAR_W)*u.dimen.BLOCK+.5*u.dimen.STROKE,e.height=u.dimen.FIELD_H*u.dimen.BLOCK+u.dimen.STROKE,this.stage=new createjs.Stage(e),this.stage.snapToPixelEnabled=!0,this.stage.enableMouseOver(10),createjs.Touch.enable(this.stage),createjs.Sound.alternateExtensions=["ogg"],this.field=new createjs.Container,this.placeholder=new createjs.Container,this.sidebar=new createjs.Container,this.level=0,this.paused=!1,this.stopped=!1,this.level_label=null,this.lines=null,this.score=null,this.hiscore=null,this.overlay=null,this.soundToggle=null,this.map=new m,this.bindEvents(),this.restart()}return o(p,[{key:"loadResources",value:function(){var e=this;if(null===n){var i=0===window.location.protocol.indexOf("http");n=new createjs.LoadQueue(i),n.addEventListener("complete",function(){return t.call(e)}),n.installPlugin(createjs.Sound),n.loadManifest([u.img.SOUND_ON,u.img.SOUND_OFF,u.audio.FALL,u.audio.LEVELUP,u.audio.REMOVE,u.audio.GAMEOVER])}return n}},{key:"pause",value:function(){createjs.Ticker.removeAllEventListeners("tick"),this.paused=!0,this.showPauseOverlay()}},{key:"unpause",value:function(){var e=this;createjs.Ticker.on("tick",function(t){return e.tick(t)}),this.paused=!1,this.hidePauseOverlay()}},{key:"restart",value:function(){this.stopped=!1,this.pause(),this.field.removeAllChildren(),this.placeholder.removeAllChildren(),this.sidebar.removeAllChildren(),this.stage.removeAllChildren(),this.map.clear(),this.setupGUI(),this.next=d.default.getInstance().produce(),this.current=d.default.getInstance().produce(),this.field.updateCache(),this.sidebar.updateCache(),this.stage.update(),this.level=0,this.updateTicker(),this.unpause()}},{key:"stop",value:function(){createjs.Sound.play(u.audio.GAMEOVER.id),this.stopped=!0,this.pause(),this.showFinalScore(),this.stage.update()}},{key:"updateTicker",value:function(){createjs.Ticker.interval=Math.ceil(l*Math.pow(c,this.level))}},{key:"setupGUI",value:function(){g&&e.call(this),this.field.set({x:u.dip(-1),y:u.dip(-1)}),this.stage.addChild(this.field),this.field.cache(u.dip(1),u.dip(1),this.fieldWidth+u.dimen.STROKE,this.height),this.placeholder.set({x:u.dip(-1),y:u.dip(-1)}),this.stage.addChild(this.placeholder),this.sidebar.set({x:this.fieldWidth+u.dimen.STROKE,y:0}),this.stage.addChild(this.sidebar);var t=new createjs.Shape;t.graphics.beginFill(u.colors.GRAY).drawRect(0,0,this.sidebarWidth,this.height),this.sidebar.addChild(t),this.setText(),null!==this.soundToggle&&this.sidebar.addChild(this.soundToggle),this.sidebar.cache(0,0,this.sidebarWidth,this.height)}},{key:"showPauseOverlay",value:function(){return null!==this.overlay?void this.stage.addChild(this.overlay):(this.overlay=new y.default(this.width,this.height),this.overlay.text=u.strings.PAUSED,this.overlay.hint=createjs.Touch.isSupported()?u.strings.PAUSE_HINT_TAP:u.strings.PAUSE_HINT,this.overlay.updateCache(),void this.stage.addChild(this.overlay))}},{key:"hidePauseOverlay",value:function(){this.stage.removeChild(this.overlay)}},{key:"showFinalScore",value:function(){null!==this.overlay&&(this.overlay.inverted=!0,this.overlay.text=[u.strings.FINAL_SCORE,parseInt(this.score.text)].join("\n"),this.overlay.hint=createjs.Touch.isSupported()?u.strings.RESTART_HINT_TAP:u.strings.RESTART_HINT,this.overlay.updateCache())}},{key:"hideFinalScore",value:function(){null!==this.overlay&&(this.overlay.inverted=!1,this.overlay.text=u.strings.PAUSED,this.overlay.hint=createjs.Touch.isSupported()?u.strings.PAUSE_HINT_TAP:u.strings.PAUSE_HINT,this.overlay.updateCache()),this.restart()}},{key:"bindEvents",value:function(){var e=this;document.onkeydown=function(t){return e.handleKeyDown(t)},createjs.Touch.isSupported()&&!function(){var t=new Hammer.Manager(e.stage.canvas,{recognizers:[[Hammer.Tap],[Hammer.Press],[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});t.on("tap",function(t){if(e.stopped)return void e.hideFinalScore();if(!e.paused){if(null!==e.soundToggle){var i=e.soundToggle.globalToLocal(e.stage.mouseX,e.stage.mouseY);if(e.soundToggle.hitTest(i.x,i.y))return}e.fallDown(),e.stage.update()}}),t.on("press",function(t){e.stopped||(h.default.vibrate(v),e.paused?e.unpause():e.pause(),e.stage.update())});var i=0,n=0;t.on("panend",function(e){i=null,n=null}),t.on("panstart",function(e){i=0,n=0}),t.on("panmove",function(t){if(!e.paused&&null!=i&&null!=n){var r=Math.abs(i-t.deltaX)>=29,a=Math.abs(n-t.deltaY)>=29;if(r||a){switch(i=t.deltaX,n=t.deltaY,t.direction){case Hammer.DIRECTION_LEFT:r&&e.moveLeft();break;case Hammer.DIRECTION_RIGHT:r&&e.moveRight();break;case Hammer.DIRECTION_DOWN:a&&e.moveDown();break;case Hammer.DIRECTION_UP:a&&(i=null,n=null,e.rotate())}e.stage.update()}}})}()}},{key:"setText",value:function(){var e=this,t=this.height/3,i=[{text:u.strings.NEXT,size:u.dimen.TEXT_BIG,y:u.dip(20)},{text:u.strings.LEVEL,size:u.dimen.TEXT_BIG,y:t+u.dip(20)},{text:h.default.str_pad(1,"0",u.strings.ZEROS.length),size:u.dimen.TEXT_SMALL,y:t+u.dip(40),label:"level_label"},{text:u.strings.LINES,size:u.dimen.TEXT_BIG,y:t+u.dip(60)},{text:u.strings.ZEROS,size:u.dimen.TEXT_SMALL,y:t+u.dip(80),label:"lines"},{text:u.strings.SCORE,size:u.dimen.TEXT_BIG,y:t+u.dip(100)},{text:u.strings.ZEROS,size:u.dimen.TEXT_SMALL,y:t+u.dip(125),label:"score"},{text:u.strings.HISCORE,size:u.dimen.TEXT_BIG,y:t+u.dip(140)},{text:u.strings.ZEROS,size:u.dimen.TEXT_SMALL,y:t+u.dip(170),label:"hiscore"}],n=this.sidebarWidth/2;if(i.forEach(function(t,i){var r=new createjs.Text(t.text,t.size,u.colors.WHITE),a=r.getBounds();r.set({x:n-a.width/2,y:i*a.height+t.y}),e.sidebar.addChild(r),t.label&&(e[t.label]=r)}),h.default.storageAvailable("localStorage")){var r=window.localStorage.getItem("hiscore");r&&(this.hiscore.text=h.default.str_pad(r,"0",u.strings.ZEROS.length))}}},{key:"handleKeyDown",value:function(e){if(e=e||window.event,this.stopped)return void(e.keyCode==u.keys.SPACE&&this.hideFinalScore());if(this.paused)return void(e.keyCode==u.keys.ESC&&(this.unpause(),this.stage.update()));switch(e.keyCode){case u.keys.UP:this.rotate();break;case u.keys.LEFT:this.moveLeft();break;case u.keys.RIGHT:this.moveRight();break;case u.keys.DOWN:this.moveDown();break;case u.keys.SPACE:this.fallDown();break;case u.keys.ESC:this.pause()}this.stage.update()}},{key:"hitTest",value:function(){for(var e=this.current.numChildren,t=0;t<e;++t){var i=this.current.getChildAt(t),n=i.localToGlobal(i.center.x,i.center.y);if(n={x:Math.round(n.x),y:Math.round(n.y)},this.map.data[n.y]&&this.map.data[n.y][n.x])return!0}return!1}},{key:"tick",value:function(e){this.moveDown(),this.stage.update(e)}},{key:"swap",value:function(){this.placeholder.removeChildAt(0),this.field.addChild(this.current),this.map.add(this.current.children),this.removeLines(),this.field.updateCache(),this.stage.update(),this.current=this.next,this.next=d.default.getInstance().produce(),this.hitTest()&&this.stop()}},{key:"rotate",value:function(){this.current.rotate();var e=this.fieldWidth-this.current.width+2*u.dimen.STROKE;this.current.x>=e&&(this.current.x=e),this.hitTest()&&this.current.rotate(!1)}},{key:"moveDown",value:function(){var e=this.height-this.current.height+u.dimen.STROKE;this.current.y+=u.dimen.BLOCK,this.hitTest()?(this.current.y-=u.dimen.BLOCK,this.swap(),createjs.Sound.play(u.audio.FALL.id)):this.current.y>e&&(this.current.y=e,this.swap(),createjs.Sound.play(u.audio.FALL.id))}},{key:"fallDown",value:function(){for(var e=this.height-this.current.height+u.dimen.STROKE;!this.hitTest();)if(this.current.y+=u.dimen.BLOCK,this.current.y>=e+u.dimen.BLOCK){this.current.y=e+u.dimen.BLOCK;break}this.current.y-=u.dimen.BLOCK,this.swap(),createjs.Sound.play(u.audio.FALL.id)}},{key:"moveLeft",value:function(){var e=this.current.x;e>0&&(this.current.x-=u.dimen.BLOCK,this.hitTest()&&(this.current.x=e))}},{key:"moveRight",value:function(){var e=this.current.x;e<this.fieldWidth-this.current.width&&(this.current.x+=u.dimen.BLOCK,this.hitTest()&&(this.current.x=e))}},{key:"removeLines",value:function(){for(var e=this,t=this.current.numChildren,i=[],n=[],r=[],a=0;a<t;++a){var o=this.current.getChildAt(a),s=o.localToGlobal(o.center.x,o.center.y);if(r.indexOf(Math.round(s.y))===-1){r.push(Math.round(s.y));var l=this.map.getLine(s.y),h=Object.keys(l);h.length==u.dimen.FIELD_W&&(i.push(l),n.push(s.y))}}var c=0;n.sort(function(e,t){return e-t}).forEach(function(t){return e.map.remove(t)}),i.forEach(function(e){for(var t in e){var i=e[t],n=i.parent;n.removeChild(i),n.updateCache(),0==n.numChildren&&n.parent.removeChild(n)}c=2*c+100}),c>0&&(createjs.Sound.play(u.audio.REMOVE.id),this.updateScore(c,i.length))}},{key:"updateScore",value:function(e,t){e+=parseInt(this.score.text);var i=h.default.str_pad(e,"0",u.strings.ZEROS.length);this.score.text=i,e>parseInt(this.hiscore.text)&&(this.hiscore.text=i,h.default.storageAvailable("localStorage")&&window.localStorage.setItem("hiscore",e)),t+=parseInt(this.lines.text),this.lines.text=h.default.str_pad(t,"0",u.strings.ZEROS.length),e/f>=this.level+1&&this.levelUp(),this.sidebar.updateCache()}},{key:"levelUp",value:function(){++this.level,this.level_label.text=h.default.str_pad(this.level+1,"0",u.strings.ZEROS.length),createjs.Sound.play(u.audio.LEVELUP.id),this.updateTicker()}},{key:"height",get:function(){return this.stage.canvas.height}},{key:"width",get:function(){return this.stage.canvas.width}},{key:"fieldWidth",get:function(){return u.dimen.FIELD_W*u.dimen.BLOCK}},{key:"sidebarWidth",get:function(){return this.width-this.fieldWidth}},{key:"current",set:function(e){e.x=this.fieldWidth/2,e.y=0,this.placeholder.addChild(e),r=e},get:function(){return r}},{key:"next",set:function(e){e.x=this.fieldWidth+this.sidebarWidth/2-e.width/2,e.y=u.dip(50),this.stage.addChild(e),s=e},get:function(){return s}}],[{key:"start",value:function(e){return null===i&&(i=new p(e)),i}}]),p}();return O}();window.Tetris=g},{"./figure":1,"./pausecontainer":3,"./res":4,"./togglebutton":5,"./util":6}],3:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("./res"),l=n(u),h=function(){var e=null,t=null,i=.8,n=new createjs.ColorMatrixFilter([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),u=function(u){function h(i,n){r(this,h);var o=a(this,Object.getPrototypeOf(h).call(this));return e=new createjs.Text,t=new createjs.Text,o.width=i,o.height=n,o.setup(),o}return o(h,u),s(h,[{key:"setup",value:function(){var n=new createjs.Shape;n.graphics.beginFill(l.colors.WHITE).drawRect(0,0,this.width,this.height),n.alpha=i,this.addChild(n);var r={x:this.width/3,y:this.height/2,textAlign:"center",color:l.colors.BLACK,lineHeight:l.dip(50)};e.set(r),e.font=l.dimen.TEXT_LARGE,this.addChild(e),t.set(r),t.y+=l.dip(100),t.font=l.dimen.TEXT_SMALL,this.addChild(t),this.cache(0,0,this.width,this.height)}},{key:"text",set:function(t){e.text=t}},{key:"hint",set:function(e){t.text=e}},{key:"inverted",set:function(e){this.filters=1==e?[n]:null},get:function(){return null!==this.filters}}]),h}(createjs.Container);return createjs.promote(u,"Container")}();i.default=h},{"./res":4}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=i.dip=function(e){return Math.floor(e*(window.devicePixelRatio||1))},r=function(e,t){return Math.abs(e-t)<Number.EPSILON||e>t},a=i.pixelRatio=function(){var e=window.devicePixelRatio||1;return r(e,4)?"xxxhdpi":r(e,3)?"xxhdpi":r(e,2)?"xhdpi":r(e,1.5)?"hdpi":"mdpi"}();i.colors={RED:"#F44336",BLUE:"#2196F3",GREEN:"#8BC34A",YELLOW:"#FFC107",PURPLE:"#9C27B0",LIME:"#CDDC39",INDIGO:"#3F51B5",BLACK:"#000000",WHITE:"#FFFFFF",GRAY:"#212121"},i.dimen={BLOCK:n(32),STROKE:n(4),FIELD_W:10,FIELD_H:20,SIDEBAR_W:5,TEXT_BIG:n(20)+"px Roboto Mono",TEXT_SMALL:n(16)+"px Roboto Mono",TEXT_LARGE:n(42)+"px Roboto Mono"},i.keys={ENTER:13,ESC:27,SPACE:32,UP:38,LEFT:37,RIGHT:39,DOWN:40},i.strings={NEXT:"next",SCORE:"score",HISCORE:"hi-score",LEVEL:"level",LINES:"lines",ZEROS:"0000000",PAUSED:"paused",PAUSE_HINT:"press esc to continue",PAUSE_HINT_TAP:"long tap to continue",RESTART_HINT:"press space to continue",RESTART_HINT_TAP:"tap to continue",FINAL_SCORE:"Final Score"},i.img={SOUND_ON:{id:"sound_on",src:["res/img",a,"ic_volume_up_white_24dp.png"].join("/")},SOUND_OFF:{id:"sound_off",src:["res/img",a,"ic_volume_off_white_24dp.png"].join("/")}},i.audio={FALL:{id:"fall",src:"res/audio/fall.mp3"},LEVELUP:{id:"levelup",src:"res/audio/levelup.mp3"},REMOVE:{id:"remove",src:"res/audio/remove.mp3"},GAMEOVER:{id:"gameover",src:"res/audio/gameover.mp3"}}},{}],5:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("./res"),l=n(u),h=function(){var e=!1,t=function(t){function i(e,t){r(this,i);var n=a(this,Object.getPrototypeOf(i).call(this));n.cursor="pointer",n.mouseChildren=!1,n.checked_icon=e,n.unchecked_icon=t;var o=n.unchecked_icon.getBounds(),s=o.width,u=o.width/2,h=o.height/2,c=new createjs.Shape;return c.graphics.beginFill(l.colors.BLACK).drawCircle(u,h,s),n.addChild(c),n.addChild(n.unchecked_icon),n.cache(-u,-h,2*s,2*s),n.regX=-u,n.regY=-h,n}return o(i,t),s(i,[{key:"checked",set:function(t){e!=t&&(e=t,this.removeChildAt(this.numChildren-1),this.addChild(e?this.checked_icon:this.unchecked_icon),this.updateCache())},get:function(){return e}}]),i}(createjs.Container);return createjs.promote(t,"Container")}();i.default=h},{"./res":4}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return r(e,null,[{key:"random",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"str_pad",value:function(e,t,i){e=""+e;var n=Array(i+1).join(t);return n.substring(0,n.length-e.length)+e}},{key:"storageAvailable",value:function(e){try{var t=window[e],i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(e){return!1}}},{key:"vibrate",value:function(e){return!(!window.navigator||"function"!=typeof window.navigator.vibrate)&&window.navigator.vibrate(e)}}]),e}();i.default=a},{}]},{},[2]);